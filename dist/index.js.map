{"version":3,"file":"index.js","mappings":"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","sources":["webpack://sql.js-httpvfs/webpack/universalModuleDefinition","webpack://sql.js-httpvfs/./src/db.ts","webpack://sql.js-httpvfs/./src/index.ts","webpack://sql.js-httpvfs/./node_modules/.pnpm/comlink@4.3.1/node_modules/comlink/dist/esm/comlink.mjs","webpack://sql.js-httpvfs/webpack/bootstrap","webpack://sql.js-httpvfs/webpack/runtime/define property getters","webpack://sql.js-httpvfs/webpack/runtime/hasOwnProperty shorthand","webpack://sql.js-httpvfs/webpack/runtime/make namespace object","webpack://sql.js-httpvfs/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn ","\"use strict\";\n/// <reference lib=\"dom\" />\n/// <reference lib=\"dom.iterable\" />\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createDbWorker = void 0;\n// TODO: using comlink for all this is a pretty ugly hack\nconst Comlink = __importStar(require(\"comlink\"));\nComlink.transferHandlers.set(\"WORKERSQLPROXIES\", {\n    canHandle: (obj) => false,\n    serialize(obj) {\n        throw Error(\"no\");\n    },\n    deserialize: (port) => {\n        port.start();\n        return Comlink.wrap(port);\n    },\n});\nasync function createDbWorker(configs, workerUrl, wasmUrl, maxBytesToRead = Infinity) {\n    const worker = new Worker(workerUrl);\n    const sqlite = Comlink.wrap(worker);\n    const db = (await sqlite.SplitFileHttpDatabase(wasmUrl, configs, undefined, maxBytesToRead));\n    worker.addEventListener(\"message\", handleAsyncRequestFromWorkerThread);\n    return { db, worker: sqlite, configs };\n}\nexports.createDbWorker = createDbWorker;\nasync function handleAsyncRequestFromWorkerThread(ev) {\n    if (ev.data && ev.data.action === \"eval\") {\n        const metaArray = new Int32Array(ev.data.notify, 0, 2);\n        const dataArray = new Uint8Array(ev.data.notify, 2 * 4);\n        let response;\n        try {\n            response = { ok: await handleDomVtableRequest(ev.data.request) };\n        }\n        catch (e) {\n            console.error(\"worker request error\", ev.data.request, e);\n            response = { err: String(e) };\n        }\n        const text = new TextEncoder().encode(JSON.stringify(response));\n        dataArray.set(text, 0); // need to copy here because:\n        // sadly TextEncoder.encodeInto: Argument 2 can't be a SharedArrayBuffer or an ArrayBufferView backed by a SharedArrayBuffer [AllowShared]\n        // otherwise this would be better:\n        /*const encodeRes = new TextEncoder().encodeInto(response, data);\n        if (encodeRes.read !== response.length) {\n          console.log(encodeRes, response.length)\n          throw Error(`not enough space for response: ${response.length} > ${data.byteLength}`);\n        }*/\n        metaArray[1] = text.length;\n        Atomics.notify(metaArray, 0);\n    }\n}\nfunction getUniqueSelector(elm) {\n    if (elm.tagName === \"BODY\")\n        return \"body\";\n    const names = [];\n    while (elm.parentElement && elm.tagName !== \"BODY\") {\n        if (elm.id) {\n            // assume id is unique (which it isn't)\n            names.unshift(\"#\" + elm.id);\n            break;\n        }\n        else {\n            let c = 1;\n            let e = elm;\n            while (e.previousElementSibling) {\n                e = e.previousElementSibling;\n                c++;\n            }\n            names.unshift(elm.tagName.toLowerCase() + \":nth-child(\" + c + \")\");\n        }\n        elm = elm.parentElement;\n    }\n    return names.join(\" > \");\n}\nfunction keys(o) {\n    return Object.keys(o);\n}\nasync function handleDomVtableRequest(req) {\n    console.log(\"dom vtable request\", req);\n    if (req.type === \"select\") {\n        return [...document.querySelectorAll(req.selector)].map((e) => {\n            const out = {};\n            for (const column of req.columns) {\n                if (column === \"selector\") {\n                    out.selector = getUniqueSelector(e);\n                }\n                else if (column === \"parent\") {\n                    if (e.parentElement) {\n                        out.parent = e.parentElement\n                            ? getUniqueSelector(e.parentElement)\n                            : null;\n                    }\n                }\n                else if (column === \"idx\") {\n                    // ignore\n                }\n                else {\n                    out[column] = e[column];\n                }\n            }\n            return out;\n        });\n    }\n    else if (req.type === \"insert\") {\n        if (!req.value.parent)\n            throw Error(`\"parent\" column must be set when inserting`);\n        const target = document.querySelectorAll(req.value.parent);\n        if (target.length === 0)\n            throw Error(`Parent element ${req.value.parent} could not be found`);\n        if (target.length > 1)\n            throw Error(`Parent element ${req.value.parent} ambiguous (${target.length} results)`);\n        const parent = target[0];\n        if (!req.value.tagName)\n            throw Error(`tagName must be set for inserting`);\n        const ele = document.createElement(req.value.tagName);\n        const cantSet = [\"idx\"];\n        for (const i of keys(req.value)) {\n            if (req.value[i] !== null) {\n                if (i === \"tagName\" || i === \"parent\")\n                    continue;\n                if (i === \"idx\" || i === \"selector\")\n                    throw Error(`${i} can't be set`);\n                ele[i] = req.value[i];\n            }\n        }\n        parent.appendChild(ele);\n        return null;\n    }\n    else if (req.type === \"update\") {\n        const targetElement = document.querySelector(req.value.selector);\n        if (!targetElement)\n            throw Error(`Element ${req.value.selector} not found!`);\n        const toSet = [];\n        for (const k of keys(req.value)) {\n            const v = req.value[k];\n            if (k === \"parent\") {\n                if (v !== getUniqueSelector(targetElement.parentElement)) {\n                    const targetParent = document.querySelectorAll(v);\n                    if (targetParent.length !== 1)\n                        throw Error(`Invalid target parent: found ${targetParent.length} matches`);\n                    targetParent[0].appendChild(targetElement);\n                }\n                continue;\n            }\n            if (k === \"idx\" || k === \"selector\")\n                continue;\n            if (v !== targetElement[k]) {\n                console.log(\"SETTING \", k, targetElement[k], \"->\", v);\n                if (k === \"tagName\")\n                    throw Error(\"can't change tagName\");\n                toSet.push(k); // defer setting to prevent setting multiple interdependent values (e.g. textContent and innerHTML)\n            }\n        }\n        for (const k of toSet) {\n            targetElement[k] = req.value[k];\n        }\n        return null;\n    }\n    else {\n        throw Error(`unknown request ${req.type}`);\n    }\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./db\"), exports);\n","/**\r\n * Copyright 2019 Google Inc. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst proxyMarker = Symbol(\"Comlink.proxy\");\r\nconst createEndpoint = Symbol(\"Comlink.endpoint\");\r\nconst releaseProxy = Symbol(\"Comlink.releaseProxy\");\r\nconst throwMarker = Symbol(\"Comlink.thrown\");\r\nconst isObject = (val) => (typeof val === \"object\" && val !== null) || typeof val === \"function\";\r\n/**\r\n * Internal transfer handle to handle objects marked to proxy.\r\n */\r\nconst proxyTransferHandler = {\r\n    canHandle: (val) => isObject(val) && val[proxyMarker],\r\n    serialize(obj) {\r\n        const { port1, port2 } = new MessageChannel();\r\n        expose(obj, port1);\r\n        return [port2, [port2]];\r\n    },\r\n    deserialize(port) {\r\n        port.start();\r\n        return wrap(port);\r\n    },\r\n};\r\n/**\r\n * Internal transfer handler to handle thrown exceptions.\r\n */\r\nconst throwTransferHandler = {\r\n    canHandle: (value) => isObject(value) && throwMarker in value,\r\n    serialize({ value }) {\r\n        let serialized;\r\n        if (value instanceof Error) {\r\n            serialized = {\r\n                isError: true,\r\n                value: {\r\n                    message: value.message,\r\n                    name: value.name,\r\n                    stack: value.stack,\r\n                },\r\n            };\r\n        }\r\n        else {\r\n            serialized = { isError: false, value };\r\n        }\r\n        return [serialized, []];\r\n    },\r\n    deserialize(serialized) {\r\n        if (serialized.isError) {\r\n            throw Object.assign(new Error(serialized.value.message), serialized.value);\r\n        }\r\n        throw serialized.value;\r\n    },\r\n};\r\n/**\r\n * Allows customizing the serialization of certain values.\r\n */\r\nconst transferHandlers = new Map([\r\n    [\"proxy\", proxyTransferHandler],\r\n    [\"throw\", throwTransferHandler],\r\n]);\r\nfunction expose(obj, ep = self) {\r\n    ep.addEventListener(\"message\", function callback(ev) {\r\n        if (!ev || !ev.data) {\r\n            return;\r\n        }\r\n        const { id, type, path } = Object.assign({ path: [] }, ev.data);\r\n        const argumentList = (ev.data.argumentList || []).map(fromWireValue);\r\n        let returnValue;\r\n        try {\r\n            const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\r\n            const rawValue = path.reduce((obj, prop) => obj[prop], obj);\r\n            switch (type) {\r\n                case \"GET\" /* GET */:\r\n                    {\r\n                        returnValue = rawValue;\r\n                    }\r\n                    break;\r\n                case \"SET\" /* SET */:\r\n                    {\r\n                        parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\r\n                        returnValue = true;\r\n                    }\r\n                    break;\r\n                case \"APPLY\" /* APPLY */:\r\n                    {\r\n                        returnValue = rawValue.apply(parent, argumentList);\r\n                    }\r\n                    break;\r\n                case \"CONSTRUCT\" /* CONSTRUCT */:\r\n                    {\r\n                        const value = new rawValue(...argumentList);\r\n                        returnValue = proxy(value);\r\n                    }\r\n                    break;\r\n                case \"ENDPOINT\" /* ENDPOINT */:\r\n                    {\r\n                        const { port1, port2 } = new MessageChannel();\r\n                        expose(obj, port2);\r\n                        returnValue = transfer(port1, [port1]);\r\n                    }\r\n                    break;\r\n                case \"RELEASE\" /* RELEASE */:\r\n                    {\r\n                        returnValue = undefined;\r\n                    }\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n        }\r\n        catch (value) {\r\n            returnValue = { value, [throwMarker]: 0 };\r\n        }\r\n        Promise.resolve(returnValue)\r\n            .catch((value) => {\r\n            return { value, [throwMarker]: 0 };\r\n        })\r\n            .then((returnValue) => {\r\n            const [wireValue, transferables] = toWireValue(returnValue);\r\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\r\n            if (type === \"RELEASE\" /* RELEASE */) {\r\n                // detach and deactive after sending release response above.\r\n                ep.removeEventListener(\"message\", callback);\r\n                closeEndPoint(ep);\r\n            }\r\n        });\r\n    });\r\n    if (ep.start) {\r\n        ep.start();\r\n    }\r\n}\r\nfunction isMessagePort(endpoint) {\r\n    return endpoint.constructor.name === \"MessagePort\";\r\n}\r\nfunction closeEndPoint(endpoint) {\r\n    if (isMessagePort(endpoint))\r\n        endpoint.close();\r\n}\r\nfunction wrap(ep, target) {\r\n    return createProxy(ep, [], target);\r\n}\r\nfunction throwIfProxyReleased(isReleased) {\r\n    if (isReleased) {\r\n        throw new Error(\"Proxy has been released and is not useable\");\r\n    }\r\n}\r\nfunction createProxy(ep, path = [], target = function () { }) {\r\n    let isProxyReleased = false;\r\n    const proxy = new Proxy(target, {\r\n        get(_target, prop) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            if (prop === releaseProxy) {\r\n                return () => {\r\n                    return requestResponseMessage(ep, {\r\n                        type: \"RELEASE\" /* RELEASE */,\r\n                        path: path.map((p) => p.toString()),\r\n                    }).then(() => {\r\n                        closeEndPoint(ep);\r\n                        isProxyReleased = true;\r\n                    });\r\n                };\r\n            }\r\n            if (prop === \"then\") {\r\n                if (path.length === 0) {\r\n                    return { then: () => proxy };\r\n                }\r\n                const r = requestResponseMessage(ep, {\r\n                    type: \"GET\" /* GET */,\r\n                    path: path.map((p) => p.toString()),\r\n                }).then(fromWireValue);\r\n                return r.then.bind(r);\r\n            }\r\n            return createProxy(ep, [...path, prop]);\r\n        },\r\n        set(_target, prop, rawValue) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\r\n            // boolean. To show good will, we return true asynchronously ¯\\_(ツ)_/¯\r\n            const [value, transferables] = toWireValue(rawValue);\r\n            return requestResponseMessage(ep, {\r\n                type: \"SET\" /* SET */,\r\n                path: [...path, prop].map((p) => p.toString()),\r\n                value,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n        apply(_target, _thisArg, rawArgumentList) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            const last = path[path.length - 1];\r\n            if (last === createEndpoint) {\r\n                return requestResponseMessage(ep, {\r\n                    type: \"ENDPOINT\" /* ENDPOINT */,\r\n                }).then(fromWireValue);\r\n            }\r\n            // We just pretend that `bind()` didn’t happen.\r\n            if (last === \"bind\") {\r\n                return createProxy(ep, path.slice(0, -1));\r\n            }\r\n            const [argumentList, transferables] = processArguments(rawArgumentList);\r\n            return requestResponseMessage(ep, {\r\n                type: \"APPLY\" /* APPLY */,\r\n                path: path.map((p) => p.toString()),\r\n                argumentList,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n        construct(_target, rawArgumentList) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            const [argumentList, transferables] = processArguments(rawArgumentList);\r\n            return requestResponseMessage(ep, {\r\n                type: \"CONSTRUCT\" /* CONSTRUCT */,\r\n                path: path.map((p) => p.toString()),\r\n                argumentList,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n    });\r\n    return proxy;\r\n}\r\nfunction myFlat(arr) {\r\n    return Array.prototype.concat.apply([], arr);\r\n}\r\nfunction processArguments(argumentList) {\r\n    const processed = argumentList.map(toWireValue);\r\n    return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\r\n}\r\nconst transferCache = new WeakMap();\r\nfunction transfer(obj, transfers) {\r\n    transferCache.set(obj, transfers);\r\n    return obj;\r\n}\r\nfunction proxy(obj) {\r\n    return Object.assign(obj, { [proxyMarker]: true });\r\n}\r\nfunction windowEndpoint(w, context = self, targetOrigin = \"*\") {\r\n    return {\r\n        postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\r\n        addEventListener: context.addEventListener.bind(context),\r\n        removeEventListener: context.removeEventListener.bind(context),\r\n    };\r\n}\r\nfunction toWireValue(value) {\r\n    for (const [name, handler] of transferHandlers) {\r\n        if (handler.canHandle(value)) {\r\n            const [serializedValue, transferables] = handler.serialize(value);\r\n            return [\r\n                {\r\n                    type: \"HANDLER\" /* HANDLER */,\r\n                    name,\r\n                    value: serializedValue,\r\n                },\r\n                transferables,\r\n            ];\r\n        }\r\n    }\r\n    return [\r\n        {\r\n            type: \"RAW\" /* RAW */,\r\n            value,\r\n        },\r\n        transferCache.get(value) || [],\r\n    ];\r\n}\r\nfunction fromWireValue(value) {\r\n    switch (value.type) {\r\n        case \"HANDLER\" /* HANDLER */:\r\n            return transferHandlers.get(value.name).deserialize(value.value);\r\n        case \"RAW\" /* RAW */:\r\n            return value.value;\r\n    }\r\n}\r\nfunction requestResponseMessage(ep, msg, transfers) {\r\n    return new Promise((resolve) => {\r\n        const id = generateUUID();\r\n        ep.addEventListener(\"message\", function l(ev) {\r\n            if (!ev.data || !ev.data.id || ev.data.id !== id) {\r\n                return;\r\n            }\r\n            ep.removeEventListener(\"message\", l);\r\n            resolve(ev.data);\r\n        });\r\n        if (ep.start) {\r\n            ep.start();\r\n        }\r\n        ep.postMessage(Object.assign({ id }, msg), transfers);\r\n    });\r\n}\r\nfunction generateUUID() {\r\n    return new Array(4)\r\n        .fill(0)\r\n        .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\r\n        .join(\"-\");\r\n}\n\nexport { createEndpoint, expose, proxy, proxyMarker, releaseProxy, transfer, transferHandlers, windowEndpoint, wrap };\n//# sourceMappingURL=comlink.mjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(357);\n"],"names":["root","factory","exports","module","define","amd","a","i","this","__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","prototype","hasOwnProperty","call","createDbWorker","Comlink","async","handleAsyncRequestFromWorkerThread","ev","data","action","metaArray","Int32Array","notify","dataArray","Uint8Array","response","ok","handleDomVtableRequest","request","e","console","error","err","String","text","TextEncoder","encode","JSON","stringify","set","length","Atomics","getUniqueSelector","elm","tagName","names","parentElement","id","unshift","c","previousElementSibling","toLowerCase","join","keys","req","log","type","document","querySelectorAll","selector","map","out","column","columns","parent","Error","target","ele","createElement","appendChild","targetElement","querySelector","toSet","push","targetParent","transferHandlers","canHandle","obj","serialize","deserialize","port","start","wrap","configs","workerUrl","wasmUrl","maxBytesToRead","Infinity","worker","Worker","sqlite","db","SplitFileHttpDatabase","addEventListener","__exportStar","p","proxyMarker","Symbol","createEndpoint","releaseProxy","throwMarker","isObject","val","Map","port1","port2","MessageChannel","expose","serialized","isError","message","name","stack","assign","ep","self","callback","path","argumentList","fromWireValue","returnValue","slice","reduce","prop","rawValue","apply","proxy","transfer","Promise","resolve","catch","then","wireValue","transferables","toWireValue","postMessage","removeEventListener","closeEndPoint","endpoint","constructor","isMessagePort","close","createProxy","throwIfProxyReleased","isReleased","isProxyReleased","Proxy","_target","requestResponseMessage","toString","r","bind","_thisArg","rawArgumentList","last","processArguments","construct","processed","arr","Array","concat","transferCache","WeakMap","transfers","windowEndpoint","w","context","targetOrigin","msg","handler","serializedValue","fill","Math","floor","random","Number","MAX_SAFE_INTEGER","l","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","key","toStringTag"],"sourceRoot":""}